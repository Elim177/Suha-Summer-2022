[{"items": [{"tags": ["python", "tensorflow", "google-cloud-platform", "jupyter-notebook", "google-cloud-tpu"], "owner": {"user_type": "does_not_exist", "display_name": "user14588808"}, "is_answered": true, "view_count": 700, "answer_count": 1, "score": 1, "last_activity_date": 1605661216, "creation_date": 1605634527, "question_id": 64880392, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/64880392/how-to-use-google-cloud-platform-tpu-v3", "title": "How to use Google Cloud Platform TPU v3?", "body": "<p>I found a tutorial on <a href=\"https://tudip.com/blog-post/run-jupyter-notebook-on-google-cloud-platform/\" rel=\"nofollow noreferrer\">How to Set up an Instance to Run a Jupyter Notebook in GCP?</a></p>\n<p>This tutorial is about how to run Jupyter Notebook in Google Cloud Platform. I would like to use also TPU v3. I also read the documentation <a href=\"https://cloud.google.com/tpu/docs/quickstart\" rel=\"nofollow noreferrer\">https://cloud.google.com/tpu/docs/quickstart</a>. But unfortunately it doesn't help me.</p>\n<p>My questions now are:</p>\n<ul>\n<li>How do I create a TPU v3 and use it in the Jupyter Notebook?</li>\n<li>How do I read and write data when TPU v3 is selected as run time?</li>\n</ul>\n<p>In Google Colab I do the following in order to use the TPU:</p>\n<pre><code>%tensorflow_version 2.x\nimport tensorflow as tf\nprint(&quot;Tensorflow version &quot; + tf.__version__)\n\ntry:\n  tpu = tf.distribute.cluster_resolver.TPUClusterResolver()  # TPU detection\n  print('Running on TPU ', tpu.cluster_spec().as_dict()['worker'])\nexcept ValueError:\n  raise BaseException('ERROR: Not connected to a TPU runtime; please see the previous cell in this notebook for instructions!')\n\ntf.config.experimental_connect_to_cluster(tpu)\ntf.tpu.experimental.initialize_tpu_system(tpu)\ntpu_strategy = tf.distribute.experimental.TPUStrategy(tpu)\n.\n.\n.\nbatch_size = 16 * tpu_strategy.num_replicas_in_sync\n.\n.\n.\nwith tpu_strategy.scope(): \n  model = create_model()\nmodel.summary()\n</code></pre>\n<p>How do I use a TPU v3 with Google Cloud Platform?</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 262}]