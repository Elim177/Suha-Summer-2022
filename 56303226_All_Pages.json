[{"items": [{"tags": ["tensorflow", "tensorflow2.0"], "owner": {"account_id": 5969261, "reputation": 671, "user_id": 4692090, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202665760083582/picture?type=large", "display_name": "Ethan Yanjia Li", "link": "https://stackoverflow.com/users/4692090/ethan-yanjia-li"}, "is_answered": true, "view_count": 2832, "accepted_answer_id": 56307018, "answer_count": 2, "score": 3, "last_activity_date": 1579677231, "creation_date": 1558773851, "question_id": 56303226, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/56303226/try-to-understand-autograph-and-tf-function-print-loss-in-tf-function", "title": "Try to understand AutoGraph and tf.function: print loss in tf.function", "body": "<pre class=\"lang-py prettyprint-override\"><code>def train_one_step():\n    with tf.GradientTape() as tape:\n        a = tf.random.normal([1, 3, 1])\n        b = tf.random.normal([1, 3, 1])\n        loss = mse(a, b)\n\n    tf.print('inner tf print', loss)\n    print(\"inner py print\", loss)\n\n    return loss\n\n\n@tf.function\ndef train():\n    loss = train_one_step()\n\n    tf.print('outer tf print', loss)\n    print('outer py print', loss)\n\n    return loss\n\nloss = train()\ntf.print('outest tf print', loss)\nprint(\"outest py print\", loss)\n</code></pre>\n\n<p>I'm trying to understand tf.functional more. I printed the loss in four places with different methods. and it produces results like this</p>\n\n<pre><code>inner py print Tensor(\"mean_absolute_error/weighted_loss/value:0\", shape=(), dtype=float32)\nouter py print Tensor(\"mean_absolute_error/weighted_loss/value:0\", shape=(), dtype=float32)\ninner tf print 1.82858419\nouter tf print 1.82858419\noutest tf print 1.82858419\noutest py print tf.Tensor(1.8285842, shape=(), dtype=float32)\n</code></pre>\n\n<ol>\n<li>what's the difference between tf.print and python print?</li>\n<li>looks like python print will be executed during graph evaluation, but tf print only when executed?</li>\n<li>the above only apply when there's tf.function decorator? outside that, tf.print runs before python print?</li>\n</ol>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 34}]