[{"items": [{"tags": ["python", "tensorflow", "tensorflow2.0"], "owner": {"account_id": 2671748, "reputation": 1153, "user_id": 2309005, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3d0825cedde3d48482239962f5f0ffa0?s=256&d=identicon&r=PG", "display_name": "splinter123", "link": "https://stackoverflow.com/users/2309005/splinter123"}, "is_answered": true, "view_count": 51, "accepted_answer_id": 68055536, "answer_count": 1, "score": 0, "last_activity_date": 1624189789, "creation_date": 1624102566, "last_edit_date": 1624124359, "question_id": 68046420, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/68046420/autograph-fails-to-convert-if-statements-from-imported-notebook", "title": "Autograph fails to convert if statements from imported notebook", "body": "<p>In a notebook <code>FuncDef.ipynb</code> I have the following code:</p>\n<pre><code>import tensorflow as tf\n\n@tf.function\ndef myfunc(x):      \n    if x &lt; 0:\n        x = -x\n    return x\n\nx = tf.constant(-1)\nprint(myfunc(x))\n</code></pre>\n<p>If I execute it, it runs as expected and prints <code>tf.Tensor(1, shape=(), dtype=int32)</code>.</p>\n<p>Now I try to execute the same code by importing it in another notebook:</p>\n<pre><code>from google.colab import drive\ndrive.mount('/content/drive')\n%cd &quot;/content/drive/My Drive/Colab Notebooks&quot;\n\n!pip install import-ipynb\nimport import_ipynb\nimport FuncDef\n</code></pre>\n<p>This fails with the following error:</p>\n<pre><code>OperatorNotAllowedInGraphError: using a `tf.Tensor` as a Python `bool` is not allowed: AutoGraph did convert this function. This might indicate you are trying to use an unsupported feature.\n</code></pre>\n<p>It looks as if Autograph fails to convert the <code>if</code> statement when executed from an imported piece of code. Is there a fix for that? Of course there's the trivial solution of getting rid of the <code>if</code> statement, but I don't want to do that is it would make my actual code much harder to read.</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 121}]