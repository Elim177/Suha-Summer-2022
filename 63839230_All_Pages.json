[{"items": [{"tags": ["python", "tensorflow", "tensorflow2.0"], "owner": {"user_type": "does_not_exist", "display_name": "user4626905"}, "is_answered": true, "view_count": 135, "answer_count": 1, "score": -1, "last_activity_date": 1600105537, "creation_date": 1599783640, "last_edit_date": 1599785789, "question_id": 63839230, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/63839230/getting-different-output-for-same-operation-in-tf1-and-tf2", "title": "Getting different output for same operation in TF1 and TF2", "body": "<p>I want to perform some matrix operations on a dataset and tried the same code both in TF1 and TF2.\nBut got different outputs.</p>\n<p><strong>TF 2</strong></p>\n<pre><code>from sklearn.datasets import fetch_california_housing\n\nhousing = fetch_california_housing()\nm,n = housing.data.shape\nhousing_data_plus_bias = np.c_[np.ones((m, 1)), housing.data]\nX = tf.constant(housing_data_plus_bias, dtype=tf.float32, name=&quot;X&quot;)\ny = tf.constant(housing.target.reshape(-1, 1), dtype=tf.float32, name=&quot;y&quot;)\nXT = tf.transpose(X)\ntheta = tf.matmul(tf.matmul(tf.linalg.inv(tf.matmul(XT, X)), XT), y)\n\ntf.print(theta)\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>[[-36.8962631]\n [0.436777472]\n [0.0094444938]\n ...\n [-0.00378797273]\n [-0.420847952]\n [-0.434020907]]\n</code></pre>\n<p><strong>TF 1:</strong></p>\n<pre><code>from sklearn.datasets import fetch_california_housing\nhousing = fetch_california_housing()\nm, n = housing.data.shape\nhousing_data_plus_bias = np.c_[np.ones((m, 1)), housing.data]\nX = tf.constant(housing_data_plus_bias, dtype=tf.float32, name=&quot;X&quot;)\ny = tf.constant(housing.target.reshape(-1, 1), dtype=tf.float32, name=&quot;y&quot;)\nXT = tf.transpose(X)\ntheta = tf.matmul(tf.matmul(tf.matrix_inverse(tf.matmul(XT, X)), XT), y)\n\n\nwith tf.Session() as sess:\n theta_value = theta.eval()\n\ntheta_value\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>array([[-3.68962631e+01],\n       [ 4.36777472e-01],\n       [ 9.44449380e-03],\n       [-1.07348785e-01],\n       [ 6.44962370e-01],\n       [-3.94082872e-06],\n       [-3.78797273e-03],\n       [-4.20847952e-01],\n       [-4.34020907e-01]], dtype=float32)\n</code></pre>\n<p>Is it a bug? Or a mistake in my code?</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 184}]