[{"items": [{"tags": ["tensorflow", "tensorflow2.0"], "owner": {"account_id": 15085414, "reputation": 147, "user_id": 11057642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcc1147639cc503c5323ed4503df7c2c?s=256&d=identicon&r=PG", "display_name": "Keren", "link": "https://stackoverflow.com/users/11057642/keren"}, "is_answered": true, "view_count": 2225, "answer_count": 3, "score": 1, "last_activity_date": 1601997686, "creation_date": 1601679548, "question_id": 64179132, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/64179132/i-need-to-upload-weights-that-were-saved-on-tensorflow-1-x-to-an-identical-model", "title": "I need to upload weights that were saved on tensorflow 1.x to an identical model in tensroflow 2.x", "body": "<p>So I have an old model with tensorflow 1.x code and it includes too much stuff I don't need, all I need is just the model and I created the model in a way I'm almost certain is identical to the previous one (I checked a bunch of stuff)</p>\n<p>I have the .data and .index and a .meta file and I tried very many different types of things and either it says that &quot;a few things weren't saved&quot; and then lists all of the weights (but not really the entire thing, cause when the weights are too big it just adds three dots (...) )</p>\n<p>I would LOVE to have someone tell me how I can use that in my new model</p>\n<p>I tried:</p>\n<p><code>model.load_weights</code></p>\n<p>I tried:</p>\n<p><code>tf.compat.v1.disable_eager_execution()</code></p>\n<p><code>sess = tf.compat.v1.Session()</code></p>\n<p><code>saver = tf.compat.v1.train.import_meta_graph('checkpoints/pix2pix-60.meta')</code></p>\n<p><code>saver.restore( &quot;checkpoints/pix2pix-60&quot;)</code></p>\n<p>I tried:</p>\n<p><code>tf.compat.v1.disable_eager_execution()</code></p>\n<p><code>sess = tf.compat.v1.Session()</code></p>\n<p><code>saver = tf.compat.v1.train.Checkpoint(model=gen)</code></p>\n<p><code>saver.restore(tf.train.latest_checkpoint('checkpoints')).assert_consumed()</code></p>\n<p>I tried:</p>\n<p><code>ck_path = tf.train.latest_checkpoint('checkpoints')</code></p>\n<p><code>gen.load_weights(ck_path)</code></p>\n<p>I tried:</p>\n<p><code>from tensorflow.python.training import checkpoint_utils as cp</code></p>\n<p><code>ckpt = cp.load_checkpoint('checkpoints/pix2pix--60')</code></p>\n<p>and then tried to see what I can do with that</p>\n<p>and I think I tried honestly a bunch of more stuff</p>\n<p><strong>I honestly won't mind if someone can even just tell me how I can read the .index or .data files so that I can just copy the weights and from there I can deal with it</strong></p>\n<p>I would again really love some help,</p>\n<p>Thanks!</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 178}]