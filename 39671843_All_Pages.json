[{"items": [{"tags": ["performance", "python-3.x", "tensorflow"], "owner": {"account_id": 3237236, "reputation": 1636, "user_id": 2731113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/?s=256&d=identicon&r=PG&f=1", "display_name": "Davis Yoshida", "link": "https://stackoverflow.com/users/2731113/davis-yoshida"}, "is_answered": false, "view_count": 202, "answer_count": 0, "score": 1, "last_activity_date": 1474683100, "creation_date": 1474683100, "last_edit_date": 1495541969, "question_id": 39671843, "content_license": "CC BY-SA 3.0", "link": "https://stackoverflow.com/questions/39671843/tensorflow-performance-degrades-over-time", "title": "Tensorflow performance degrades over time", "body": "<p>I have some tensorflow code (nothing complicated), and am measuring the time per minibatch. For some reason, the time per minibatch gets longer and longer from batch to batch. It ends up taking around 6 times as long for each batch than it does for the first batch.</p>\n\n<p>I seem to be experiencing the exact same thing as this <a href=\"https://stackoverflow.com/questions/39472787/tensorflow-l2-loss-training-time-per-iteration-increases-over-time\">unanswered question</a>.</p>\n\n<p>The following results in the slowdown</p>\n\n<pre><code>self._loss =  tf.reduce_mean(tf.nn.sparse_softmax_cross_entropy_with_logits(logits, tf.to_int64(self._label_placeholder)))\nfor W, b in layers:\n    self._loss += tf.nn.l2_loss(W) * rho\n</code></pre>\n\n<p>However, if I use:</p>\n\n<pre><code>self._loss =  tf.reduce_mean(tf.nn.sparse_softmax_cross_entropy_with_logits(logits, tf.to_int64(self._label_placeholder)))\n# for W, b in layers:\n#     self._loss += tf.nn.l2_loss(W) * rho\n</code></pre>\n\n<p>The time per minibatch does not increase over time. I also tried manually computing the Frobenius of my matrices and got the same slowdown.</p>\n\n<p>What can I do to incorporate regularization without getting a massive slowdown?</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 39}]