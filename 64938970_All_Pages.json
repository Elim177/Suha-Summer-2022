[{"items": [{"tags": ["python", "tensorflow", "keras", "low-level-api"], "owner": {"account_id": 19454910, "reputation": 81, "user_id": 14230467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07c1d5bab64b758ee02be6ab4f66a3d4?s=256&d=identicon&r=PG&f=1", "display_name": "yuanhang", "link": "https://stackoverflow.com/users/14230467/yuanhang"}, "is_answered": false, "view_count": 1353, "answer_count": 1, "score": 4, "last_activity_date": 1647512213, "creation_date": 1605922293, "question_id": 64938970, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/64938970/warning-this-property-should-not-be-used-in-tensorflow-2-0-as-updates-are-appl", "title": "WARNING: This property should not be used in TensorFlow 2.0, as updates are applied automatically", "body": "<p>I was running some code in Google Colab. I defined my own model &quot;MyModel()&quot; and some functions (not shown because it's too long), which is inherited from 'tf.keras.Model'.</p>\n<p>'''</p>\n<pre><code>save_model_path='./models' # path to save trained model\nsave_mat_folder='./results' # path to save reconstruction examples\nlog_path='./tensorboard_log' # path to log training process\nload_model_path = save_model_path\n\nmodel = MyModel()\n\nsummary_writer = tf.summary.create_file_writer(log_path)\ntf.summary.trace_on(graph = True,profiler = False)\n\nvariables = [model.phi1,model.phi2] # write variables in a list\n\n# define optimizer\noptimizer =  tf.keras.optimizers.Adam(learning_rate= 1e-3)\nfor i in tf.range(50):\n    # print(i)\n    # below for TF 1.x:\n    # loss,summary,_=sess.run([L,merged,train_op],feed_dict) #run(fetches, feed_dict=None, options=None, run_metadata=None)\n    # model1_writer.add_summary(summary,global_step = i)\n    # below for TF2.x:\n    with tf.GradientTape() as tape:\n        # loss function\n        loss = model.call(Ein)\n    # The tape is automatically erased immediately after you call its gradient() method\n    grads = tape.gradient(loss, variables) ## auto-differentiation\uff0cpowerful !!\n    # TensorFlow will update parameters automatically\n    optimizer.apply_gradients(grads_and_vars=zip(grads, variables))\n    # train_op = optimizer.minimize(L) # calculates gradients automatically\n    with summary_writer.as_default():\n        tf.summary.scalar('loss', loss, step = tf.cast(i,tf.int64))\n    if i % 10 == 0:\n        print(loss)\n# export trace \nwith summary_writer.as_default():\n    tf.summary.trace_export(name ='model_trace',step=0 ) #, profiler_outdir = log_path) \n    tf.saved_model.save(model, save_model_path)\n# save_path=saver.save(sess,save_model_path)\n</code></pre>\n<p>'''</p>\n<p>The code looks worked, but got unexpected warnings. Can anyone tell me source of the warning?</p>\n<p>Below are the running outputs:\n**</p>\n<pre><code>tf.Tensor(-8.2480165e-06, shape=(), dtype=float32)\ntf.Tensor(-8.653108e-06, shape=(), dtype=float32)\ntf.Tensor(-9.343687e-06, shape=(), dtype=float32)\ntf.Tensor(-1.0216764e-05, shape=(), dtype=float32)\ntf.Tensor(-1.1233077e-05, shape=(), dtype=float32)\nWARNING:tensorflow:Skipping full serialization of Keras layer &lt;__main__.MyModel object at 0x7fea4a9e9e48&gt;, because it is not built.\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/tracking.py:111: Model.state_updates (from tensorflow.python.keras.engine.training) is deprecated and will be removed in a future version.\nInstructions for updating:\nThis property should not be used in TensorFlow 2.0, as updates are applied automatically.\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/tracking.py:111: Layer.updates (from tensorflow.python.keras.engine.base_layer) is deprecated and will be removed in a future version.\nInstructions for updating:\nThis property should not be used in TensorFlow 2.0, as updates are applied automatically.\nINFO:tensorflow:Assets written to: ./models/assets\n</code></pre>\n<p>**</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 137}]