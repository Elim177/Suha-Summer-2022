[{"items": [{"tags": ["tensorflow"], "owner": {"account_id": 8550263, "reputation": 2937, "user_id": 6407393, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9bb0b98b4ea95c6d68fbe20eedcb7f81?s=256&d=identicon&r=PG&f=1", "display_name": "yanachen", "link": "https://stackoverflow.com/users/6407393/yanachen"}, "is_answered": true, "view_count": 39, "answer_count": 1, "score": 0, "last_activity_date": 1525944495, "creation_date": 1525943625, "question_id": 50269385, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/50269385/how-to-process-the-whole-batch-tensor-in-efficient-way", "title": "How to process the whole batch tensor in efficient way?", "body": "<pre><code>with tf.Session() as sess:\n    with tf.variable_scope('experiment'):\n        a = tf.get_variable('a', [1000,24,128], dtype=tf.float32, initializer=tf.random_normal_initializer(stddev=0.1) )\n        b = tf.get_variable('b', [1000,15,128], dtype=tf.float32, initializer=tf.random_normal_initializer(stddev=0.1) )\n        c = tf.get_variable('c', [1000,24,15], dtype=tf.float32,  initializer=tf.random_normal_initializer(stddev=0.1))\n        for i in range(1000):\n            ai = tf.slice(a,[i,0,0],[1,-1,-1]) # (1,24,128)\n            bi = tf.slice(b,[i,0,0],[1,-1,-1]) # (1,15,128)\n            aii = tf.reshape(ai, [ int(ai.get_shape()[1]), int(ai.get_shape()[2])] ) # (24, 128)\n            bii = tf.reshape(bi, [ int(bi.get_shape()[1]), int(bi.get_shape()[2])] ) # (15, 128)\n            ci = contract_func(aii,bii) # (24,15)\n            c[i] = ci\n</code></pre>\n\n<p>I want to process the two batch: a and b and product c. Batch size is 1000.\nEvery element ci is the contract result of ai and bi. The contract operation is defined by myself. \nBut I am not sure whether it is an efficient way to do this? Is there any simple method ? Thanks.</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 81}]