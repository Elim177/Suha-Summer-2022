[{"items": [{"tags": ["python", "tensorflow"], "owner": {"account_id": 6956681, "reputation": 1056, "user_id": 5337505, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-F4WMV67MG-o/AAAAAAAAAAI/AAAAAAAABGA/b-vMtZ0piXI/photo.jpg?sz=256", "display_name": "Siladittya", "link": "https://stackoverflow.com/users/5337505/siladittya"}, "is_answered": false, "view_count": 54, "answer_count": 0, "score": 0, "last_activity_date": 1519794732, "creation_date": 1519772334, "last_edit_date": 1519794732, "question_id": 49019319, "content_license": "CC BY-SA 3.0", "link": "https://stackoverflow.com/questions/49019319/tensor-value-changes-when-evaluated-multiple-times", "title": "Tensor value changes when evaluated multiple times", "body": "<p>I am trying to do data augmentation on a small batch of images of batch size 4.(Just for testing purpose)</p>\n\n<pre><code>sess = tf.Session()\n#Create dataset\ndataset = get_dataset()\n#Set seed placeholder\nseedin = tf.placeholder(tf.int64,shape=())\n#Get iterator\niterator = create_next_batch_iterator(dataset,seedin)\n#Initialize the Iterator\nsess.run(iterator.initializer,feed_dict={seedin:6})\n#Get next batch\nnext_batch = get_next_batch(iterator)\nprint next_batch\nprint 'without augmentation:',next_batch['labels'].eval(session=sess)\n</code></pre>\n\n<p>The output I am getting is </p>\n\n<pre><code>{'images': &lt;tf.Tensor 'IteratorGetNext:0' shape=(4, 96, 96, 3) dtype=uint8&gt;, \n'labels': &lt;tf.Tensor 'IteratorGetNext:1' shape=(4,) dtype=uint8&gt;}\nwithout augmentation: [6 1 7 6]\n</code></pre>\n\n<p>But If I replace the last line with the next line of code</p>\n\n<pre><code>next_batch = augment_data(get_next_batch(iterator),sess)\nprint next_batch\n</code></pre>\n\n<p>The <strong>problem</strong> starts here...</p>\n\n<p>Code for the <code>augment_data</code> function</p>\n\n<pre><code>def augment_data(batch,sess,naug=5):\n    labels_tensor = batch['labels'].eval(session=sess)\n    print labels_tensor\n    labels_array = np.array(batch['labels'].eval(session=sess))\n    print labels_array\n</code></pre>\n\n<p>I get two different values for <code>labels_tensor</code> and <code>labels_array</code></p>\n\n<pre><code>[6 1 7 6]\n[9 3 8 4]\n</code></pre>\n\n<p>These values are the same values I get if I execute</p>\n\n<pre><code>next_batch = get_next_batch(iterator)\nprint next_batch\n</code></pre>\n\n<p>two consecutive times.</p>\n\n<p>It seems, that whenever I am trying to get the Tensors from <code>batch</code>, the <code>get_next_batch()</code> function is getting executed, and that's why I am getting a new set of values.</p>\n\n<p>Why is that??\nHow can I solve this problem?</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 31}]