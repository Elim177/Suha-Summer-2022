[{"items": [{"tags": ["python", "tensorboard", "tensorflow2.0"], "owner": {"account_id": 474979, "reputation": 2169, "user_id": 1447953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7950906f179a27d0b6f71d84841374cb?s=256&d=identicon&r=PG", "display_name": "Ben Farmer", "link": "https://stackoverflow.com/users/1447953/ben-farmer"}, "is_answered": true, "view_count": 1423, "answer_count": 3, "score": 1, "last_activity_date": 1619505984, "creation_date": 1576246763, "last_edit_date": 1576249053, "question_id": 59324381, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/59324381/tensorflow-summary-scalar-written-to-event-log-as-tensor-in-example", "title": "TensorFlow summary Scalar written to event log as Tensor in example", "body": "<p>TensorFlow version = 2.0.0</p>\n\n<p>I am following the example of how to use the TensorFlow summary module at <a href=\"https://www.tensorflow.org/api_docs/python/tf/summary\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/api_docs/python/tf/summary</a>; the first one on the page, which for completeness I will paste below:</p>\n\n<pre><code>writer = tf.summary.create_file_writer(\"/tmp/mylogs\")\nwith writer.as_default():\n  for step in range(100):\n    # other model code would go here\n    tf.summary.scalar(\"my_metric\", 0.5, step=step)\n    writer.flush()\n</code></pre>\n\n<p>Running this is fine, and I get event logs that I can view in TensorBoard. Great! However when I look in the event log using:</p>\n\n<pre><code>tensorboard --inspect --logdir=tmp/mylogs\n</code></pre>\n\n<p>it tells me that my summary variable has been written to the log as a Tensor for some reason, not a Scalar:</p>\n\n<pre><code>Event statistics for tmp/mylogs:\naudio -\ngraph -\nhistograms -\nimages -\nscalars -\nsessionlog:checkpoint -\nsessionlog:start -\nsessionlog:stop -\ntensor\n   first_step           0\n   last_step            99\n   max_step             99\n   min_step             0\n   num_steps            100\n   outoforder_steps     [(99, 0)]\n</code></pre>\n\n<p>I guess that might not be a problem, except that when I try to read from the event log following the method in e.g. <a href=\"https://stackoverflow.com/a/45899735/1447953\">https://stackoverflow.com/a/45899735/1447953</a>:</p>\n\n<pre><code>from tensorboard.backend.event_processing.event_accumulator import EventAccumulator\nx = EventAccumulator(path=\"tmp/mylogs\")\nx.Reload()\nprint(x.Tags())\n</code></pre>\n\n<p>then it again tells me that <code>my_metric</code> is a Tensor:</p>\n\n<pre><code>{'images': [], 'audio': [], 'histograms': [], 'scalars': [], 'distributions': [], 'tensors': ['my_metric'], 'graph': False, 'meta_graph': False, 'run_metadata': []}\n</code></pre>\n\n<p>and when I try to look at the data it is gibberish</p>\n\n<pre><code>w_times, step_nums, vals = zip(*x.Tensors('my_metric'))\nprint(\"vals:\", vals)\n\nvals: (dtype: DT_FLOAT\ntensor_shape {\n}\ntensor_content: \"\\000\\000\\000?\"\n, dtype: DT_FLOAT\ntensor_shape {\n}\ntensor_content: \"\\000\\000\\000?\"\n, dtype: DT_FLOAT\ntensor_shape {\n}\n...\netc.            \n</code></pre>\n\n<p>Am I doing something wrong here? The example seemed pretty simple so I'm not sure what the problem could be. I just copy/pasted it. Or maybe they decided to always stick data under the 'Tensor' tags and there is some way to convert the values back to something usable in standard plotting tools?</p>\n\n<p>Edit: Ok right at the bottom of the migration doc <a href=\"https://www.tensorflow.org/tensorboard/migrate\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/tensorboard/migrate</a> it says:</p>\n\n<p>The event file binary representation has changed:</p>\n\n<ul>\n<li><p>TensorBoard 1.x already supports the new format; this difference only affects users who are manually parsing summary data from event files</p></li>\n<li><p>Summary data is now stored as tensor bytes; you can use tf.make_ndarray(event.summary.value[0].tensor) to convert it to numpy</p></li>\n</ul>\n\n<p>So I guess that means the storage as 'tensor' is normal. The conversion is still mysterious to me though, they seem to be referring to a different interface than the EventAccumulator one I found. And it also seems that I only get 10 out 100 events recorded for some reason, which I also find mysterious.</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 175}]