[{"items": [{"tags": ["python", "tensorflow", "tensorflow-datasets"], "owner": {"account_id": 963556, "reputation": 1375, "user_id": 987397, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/fa7ae7d9bd13c2d04335c3209865c262?s=256&d=identicon&r=PG", "display_name": "Derk", "link": "https://stackoverflow.com/users/987397/derk"}, "is_answered": true, "view_count": 20532, "accepted_answer_id": 49537098, "answer_count": 2, "score": 12, "last_activity_date": 1626177353, "creation_date": 1522230476, "last_edit_date": 1626177353, "question_id": 49531286, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/49531286/cannot-batch-tensors-with-different-shapes-in-component-0-with-tf-data-dataset", "title": "Cannot batch tensors with different shapes in component 0 with tf.data.Dataset", "body": "<p>I have the following error in my input pipeline:</p>\n\n<blockquote>\n  <p>tensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot\n  batch tensors with different shapes in component 0. First element had\n  shape [2,48,48,3] and element 1 had shape [27,48,48,3].</p>\n</blockquote>\n\n<p>with this code</p>\n\n<pre><code>dataset = tf.data.Dataset.from_generator(generator,\n                                         (tf.float32, tf.int64, tf.int64, tf.float32, tf.int64, tf.float32))\n\ndataset = dataset.batch(max_buffer_size)\n</code></pre>\n\n<p>This is completely logical as the batch method tries to create a (batch_size, ?, 48, 48, 3) Tensor. However I want that it creates a [29,48,48,3] Tensor for this case. So concatenate instead of stack. Is this possible with tf.data?</p>\n\n<p>I can do the concatenation in Python in the generator function, but I was wondering if this is also possible with the tf.data pipeline</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 83}]