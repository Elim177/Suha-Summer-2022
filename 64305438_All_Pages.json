[{"items": [{"tags": ["python", "tensorflow", "tensorflow-datasets"], "owner": {"account_id": 15116032, "reputation": 30058, "user_id": 10908375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7f8w.jpg?s=256&g=1", "display_name": "Nicolas Gervais", "link": "https://stackoverflow.com/users/10908375/nicolas-gervais"}, "is_answered": true, "view_count": 5204, "answer_count": 1, "score": 12, "last_activity_date": 1604938304, "creation_date": 1602428235, "question_id": 64305438, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/64305438/warning-the-calling-iterator-did-not-fully-read-the-dataset-being-cached-in-or", "title": "Warning: The calling iterator did not fully read the dataset being cached. In order to avoid unexpected truncation of the dataset", "body": "<p>This occurred while I was using <code>tf.data.Dataset</code>:</p>\n<blockquote>\n<p>The calling iterator did not fully read the dataset being cached. In order to avoid unexpected truncation of the dataset, the partially cached contents of the dataset will be discarded. This can happen if you have an input pipeline similar to <code>dataset.cache().take(k).repeat()</code>. You should use <code>dataset.take(k).cache().repeat()</code> instead.</p>\n</blockquote>\n<p>According to other questions, for example <a href=\"https://stackoverflow.com/questions/50519343/how-to-cache-data-during-the-first-epoch-correctly-tensorflow-dataset\">this one</a>, it has something to do with where <code>cache()</code> is in the sequence of methods, but I can't understand what to do concretely.</p>\n<p>Here's how to reproduce the warning:</p>\n<pre><code>import tensorflow_datasets as tfds\n\nds = tfds.load('iris', split='train')\n\nds = ds.take(100)\n\nfor elem in ds:\n    pass\n</code></pre>\n<p>Seems like no matter what I do, and no matter where I use <code>cache()</code>, the warning pops up.</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 51}]