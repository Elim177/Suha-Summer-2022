[{"items": [{"tags": ["python-3.x", "tensorflow", "tensorflow-estimator", "tensorflow2.0"], "owner": {"account_id": 285031, "reputation": 5218, "user_id": 583464, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/931448dc20c10c1b799bb9dba38b5e58?s=256&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/583464/george"}, "is_answered": true, "view_count": 2043, "accepted_answer_id": 55087846, "answer_count": 1, "score": 3, "last_activity_date": 1552486963, "creation_date": 1552044745, "last_edit_date": 1552486963, "question_id": 55062375, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/55062375/tensorflow-api-2-0-tensor-objects-are-only-iterable-when-eager-execution-is-enab", "title": "tensorflow api 2.0 tensor objects are only iterable when eager execution is enabled. To iterate over this tensor use tf.map_fn", "body": "<p>I am trying to use tensorflow estimator using tensorflow api 2.</p>\n\n<pre><code>import tensorflow as tf\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndf = pd.DataFrame({'A': np.array([100, 105.4, 108.3, 111.1, 113, 114.7]),\n                   'B': np.array([11, 11.8, 12.3, 12.8, 13.1,13.6]),\n                   'C': np.array([55, 56.3, 57, 58, 59.5, 60.4]),\n                   'Target': np.array([4000, 4200.34, 4700, 5300, 5800, 6400])})\n\nfeatcols = [\n    tf.feature_column.numeric_column(\"A\"),\n    tf.feature_column.numeric_column(\"B\"),\n    tf.feature_column.numeric_column(\"C\")\n]\n\nmodel = tf.estimator.LinearRegressor(featcols)\n\nfeatures = tf.convert_to_tensor([\"A\", \"B\", \"C\"])\n\ndef train_input_fn():\n    training_dataset = (\n        tf.data.Dataset.from_tensor_slices(\n            (\n                tf.cast(df[[features]].values, tf.float32),\n                tf.cast(df['Target'].values, tf.float32)\n            )\n        )\n    )\n    return training_dataset\n\nmodel.train(train_input_fn)\n</code></pre>\n\n<p>The last line throwes me:</p>\n\n<p><code>TypeError: Tensor objects are only iterable when eager execution is enabled. To iterate over this tensor use tf.map_fn</code></p>\n\n<p>Also, it gives me a warning:</p>\n\n<pre><code>Variable.initialized_value (from tensorflow.python.ops.variables) is deprecated and will be removed in a future version.\nInstructions for updating:\nUse Variable.read_value. Variables in 2.X are initialized automatically both in eager and graph (inside tf.defun) contexts.\n</code></pre>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 58}]