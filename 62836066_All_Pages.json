[{"items": [{"tags": ["tensorflow", "for-loop", "machine-learning", "keras", "infinite-loop"], "owner": {"account_id": 11089245, "reputation": 99, "user_id": 8141772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aff8ba6df657e96ba0244a98e8c3528?s=256&d=identicon&r=PG&f=1", "display_name": "Mr. Johnny Doe", "link": "https://stackoverflow.com/users/8141772/mr-johnny-doe"}, "is_answered": true, "view_count": 1917, "answer_count": 1, "score": 2, "last_activity_date": 1595198624, "creation_date": 1594390016, "question_id": 62836066, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/62836066/infinite-loop-with-imagedatagenerator", "title": "Infinite Loop with ImageDataGenerator", "body": "<p>I am working with a larger dataset and as a result, have to load data into my RAM batchwise for faster running without running out of resources. I am using Image Data Generator with <code>.flow</code></p>\n<p>Using a for loop is resulting in an infinite loop that constantly generates images of the same batch size before looping over to start again. The preparator code is shown below:</p>\n<pre><code>train_dataset=tf.keras.preprocessing.image.ImageDataGenerator(featurewise_center=False, samplewise_center=False,\n    featurewise_std_normalization=False, samplewise_std_normalization=False,\n    zca_whitening=False, rotation_range=0, width_shift_range=0.0,\n    height_shift_range=0.0, brightness_range=None, shear_range=0.0, zoom_range=0.0,\n    channel_shift_range=0.0, cval=0.0, horizontal_flip=False,\n    vertical_flip=False, preprocessing_function=None,\n    data_format=None, validation_split=0.0, dtype=None)\ntrain_dataset.fit(X)\n</code></pre>\n<p>Followed by an attempted loop as shown below:</p>\n<pre><code>for images, y_batch in train_dataset.flow(X, y, batch_size=batch_size):\n          print(np.shape(images))\n</code></pre>\n<p>The code just keeps returning arrays of the dimension:</p>\n<p><code> (batch_size,img_size,img_size,3)</code>\n(I need these images for bringing data into my RAM to carry out back prop). Note that I am not using anything like a <code>model.fit</code> and need to run these arrays through my proper code.</p>\n<p>Not too sure how to add a stop condition</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 91}]