[{"items": [{"tags": ["python", "python-3.x", "tensorflow"], "owner": {"account_id": 4328522, "reputation": 2449, "user_id": 3534616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/neZwu.jpg?s=256&g=1", "display_name": "Himaprasoon", "link": "https://stackoverflow.com/users/3534616/himaprasoon"}, "is_answered": false, "view_count": 138, "answer_count": 0, "score": 3, "last_activity_date": 1543571357, "creation_date": 1543571357, "question_id": 53555018, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/53555018/is-tf-constant-initializer-value-stored-in-graph-like-how-constants-are-stored-i", "title": "Is tf.constant_initializer value stored in graph like how constants are stored in tensorflow ? If not where is the constant value stored?", "body": "<p>In tensorflow, if we create a variable with initial value as a constant, then the constant value will be stored in tensorflow graph and therefore you can't have large constant values, as the limit for tensorflow graph proto is 2GB. \nsee eg:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\nshape=(3*(10**8))\nmy_large_array = np.random.random_integers(low=0,high=10,size=shape)\nprint(\"Size of array in Giga bytes \",my_large_array.nbytes*(10**-9))\nb= tf.Variable(name=\"constant_var\",initial_value=my_large_array)\nwith tf.Session() as sess:\n    print(sess.run(tf.global_variables_initializer()))\n    print(\"Init done\") \n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>Size of array in Giga bytes  2.4000000000000004\n....\nValueError: Cannot create a tensor proto whose content is larger than 2GB.\n</code></pre>\n\n<p>But when a constant initializer with the same value is used as the initial value, no errors are raised. eg:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\nshape=(3*(10**8))\nmy_large_array = np.random.random_integers(low=0,high=10,size=shape)\nprint(\"Size of array in Giga bytes \",my_large_array.nbytes*(10**-9))\nA = tf.get_variable(name=\"initializer_var\",initializer=tf.constant_initializer(value=my_large_array),shape=shape)\n# b= tf.Variable(name=\"constant_var\",initial_value=my_large_array)\nwith tf.Session() as sess:\n    print(sess.run(tf.global_variables_initializer()))\n    print(\"Init done\")\n    print(np.array_equal(sess.run(A),my_large_array))\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Size of array in Giga bytes  2.4000000000000004\nNone\nInit done\nTrue\n</code></pre>\n\n<p>Where is this constant numpy array saved in the second scenario if not in the graph? Wouldn't the variable have an initial state in this scenario?</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 275}]