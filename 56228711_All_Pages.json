[{"items": [{"tags": ["tensorflow", "deep-learning"], "owner": {"user_type": "does_not_exist", "display_name": "user10729342"}, "is_answered": true, "view_count": 235, "accepted_answer_id": 56237863, "answer_count": 1, "score": 1, "last_activity_date": 1558440071, "creation_date": 1558389593, "question_id": 56228711, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/56228711/error-on-tensorflow-shape-must-be-rank-2-but-is-rank-1-for-matmul-25", "title": "Error on tensorflow: Shape must be rank 2 but is rank 1 for &#39;MatMul_25&#39;", "body": "<p>I'm trying to create a conditional GAN. However, i'm stuck as to why no matter what i do, it appears the same error over and over again. \nHere's the code:</p>\n\n<pre><code>image_dim = 784  #28 * 28\nY_dimension = 10\ngen_hidd_dim = 256\ndisc_hidd_dim = 256\nz_noise_dim =100 #input noise datapoint\n\ndef xavier_init(shape):\n  return tf.random_normal(shape = shape, stddev = 1/tf.sqrt(shape[0]/2.0))\n\nweights = {\n    'disc_H' : tf.Variable(xavier_init([image_dim + Y_dimension, disc_hidd_dim])),\n    'disc_final' : tf.Variable(xavier_init([disc_hidd_dim, 1])),\n    'gen_H': tf.Variable([z_noise_dim + Y_dimension, gen_hidd_dim]),\n    'gen_final': tf.Variable(xavier_init([gen_hidd_dim, image_dim]))\n}\n\nbias = {\n    'disc_H': tf.Variable(xavier_init([disc_hidd_dim])),\n    'disc_final': tf.Variable(xavier_init([1])),\n    'gen_H': tf.Variable(xavier_init([gen_hidd_dim])),\n    'gen_final': tf.Variable(xavier_init([image_dim]))\n}\n\nZ_input = tf.placeholder(tf.float32, shape= [None, z_noise_dim ], name = 'input_noise')\nY_input = tf.placeholder(tf.float32, shape= [None, Y_dimension], name='Labels')\nX_input = tf.placeholder(tf.float32, shape=[None, image_dim], name = 'real_input')\n\ndef Discriminator(x,y):\n  inputs = tf.concat(axis = 1, values = [x,y])\n  hidden_layer = tf.nn.relu(tf.add(tf.matmul(inputs, weights['disc_H']), bias['disc_H']))\n  final_layer = tf.add(tf.matmul(hidden_layer, weights['disc_final']), bias['disc_final'])\n  disc_output = tf.nn.sigmoid(final_layer)\n  return final_layer, disc_output\n\ndef Generator(x,y):\n  inputs = tf.concat(axis=1, values=[x,y])\n  hidden_layer = tf.nn.relu(tf.add(tf.matmul(tf.cast(inputs, tf.float32), tf.cast(weights['gen_H'], tf.float32)), tf.cast(bias['gen_H'],tf.float32)))\n  final_layer = tf.add(tf.matmul(hidden_layer, weights['gen_final']), bias['gen_final'])\n  gen_output = tf.nn.sigmoid(final_layer)\n  return gen_output\n\noutput_Gen = Generator(Z_input, Y_input)\n</code></pre>\n\n<p>Right after executing the Generator i get the following error:</p>\n\n<pre><code> ValueError: Shape must be rank 2 but is rank 1 for 'MatMul_25' (op: 'MatMul') with input shapes: [?,110], [2].\n</code></pre>\n\n<p>What to do?</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 51}]