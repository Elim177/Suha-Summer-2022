[{"items": [{"tags": ["tensorflow", "tensorflow2.0"], "owner": {"account_id": 15716286, "reputation": 125, "user_id": 11717990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1siV9.jpg?s=256&g=1", "display_name": "Omega", "link": "https://stackoverflow.com/users/11717990/omega"}, "is_answered": true, "view_count": 219, "accepted_answer_id": 66923549, "answer_count": 1, "score": 1, "last_activity_date": 1617393405, "creation_date": 1617369475, "last_edit_date": 1617393405, "question_id": 66919907, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/66919907/issue-tf-function-raising-a-warning-and-failing-with-tf-stack", "title": "Issue: tf.function raising a warning and failing with tf.stack", "body": "<p>I am having problems with <code>tf.function</code> in tensorflow. It seems to fail to convert functions containing the instruction <code>tf.stack()</code>.</p>\n<p>Here a simple code I wrote to highlight the issue:</p>\n<pre><code>import tensorflow as tf\nc = tf.Variable([[1., 5.], [2., 4.]])\n@tf.function\ndef toy_fct(x):\n    y = tf.stack([x[0,:], x[1,:]], axis=0)\n    return y\ntoy_fct(c)\n</code></pre>\n<p>The messages I get are the following:</p>\n<pre><code>WARNING:tensorflow:AutoGraph could not transform &lt;function toy_fct at 0x000001DC9A13A670&gt; and will run it as-is.\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\nCause: module 'gast' has no attribute 'Index'\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\nWARNING: AutoGraph could not transform &lt;function toy_fct at 0x000001DC9A13A670&gt; and will run it as-is.\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\nCause: module 'gast' has no attribute 'Index'\nTo silence this warning, decorate the function with @tf.autograph.experimental.do_not_convert\n\n&lt;tf.Tensor: shape=(2, 2), dtype=float32, numpy=\narray([[1., 5.],\n       [2., 4.]], dtype=float32)&gt;\n</code></pre>\n<p>Does anybody have any idea?</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 172}]