[{"items": [{"tags": ["python", "tensorflow", "tensorflow2.0"], "owner": {"account_id": 4328522, "reputation": 2449, "user_id": 3534616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/neZwu.jpg?s=256&g=1", "display_name": "Himaprasoon", "link": "https://stackoverflow.com/users/3534616/himaprasoon"}, "is_answered": true, "view_count": 679, "accepted_answer_id": 59453275, "answer_count": 1, "score": 0, "last_activity_date": 1577098438, "creation_date": 1577085535, "last_edit_date": 1577097796, "question_id": 59451469, "content_license": "CC BY-SA 4.0", "link": "https://stackoverflow.com/questions/59451469/tensorflow-2-0-none-values-are-not-supported-error-in-tf-function-while-trying", "title": "Tensorflow 2.0 : None values are not supported error in tf.function while trying to print last result", "body": "<p>I am trying to print the result of the final batch in tf.function</p>\n\n<pre><code>import tensorflow as tf\n\ndef small_data():\n    for i in range(10):\n        yield 3, 2\n\ndata = tf.data.Dataset.from_generator(\n    small_data, (tf.int32, tf.int32), )\n\ndef result(data):\n    \"\"\"\n    Psuedo code for a model which outputs multiple layer outputs\n    :param data:\n    :return:\n    \"\"\"\n    return tf.random.normal(shape=[1, 2]), tf.random.normal(shape=[1, 2]),data[0]\n\n@tf.function\ndef train(dataset):\n    batch_result = None\n    for batch in dataset:\n        batch_result = result(data)\n    tf.print(\"Final batch result is\", batch_result)\n\n\ntrain(dataset=data)\n\n\n</code></pre>\n\n<p>Error</p>\n\n<pre><code> raise ValueError(\"None values not supported.\")\n\n    ValueError: None values not supported.\n</code></pre>\n\n<p>result function is actually a Keras model which results in layer outputs of different shapes. If I remove the <code>batch_result=None</code> assignment and move the tf.print inside the loop, It prints for each batch. I want to print the result only for the last batch. Also, I am not sure about the number of records fed to the loop. I have also tried multiple variations but nothing worked. How can I achieve this in tensorflow 2.0.</p>\n"}], "has_more": false, "quota_max": 300, "quota_remaining": 21}]